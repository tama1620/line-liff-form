<!DOCTYPE html>
<html>
<head>
    </head>
<body>
    <h2>家族の誕生日登録</h2>
    <p>ご本人様だけでなく、お子様などご家族の誕生日も登録できます！</p>

    <form id="birthForm">
        <select name="relation" required>
            <option value="">どなたの誕生日ですか？</option>
            <option value="本人">本人</option>
            <option value="お子様">お子様</option>
            <option value="パートナー">パートナー</option>
            <option value="その他家族">その他家族</option>
        </select>
        <br>
        <select name="birthMonth" required>
            <option value="">誕生月を選択してください</option>
            </select>
        <br>
        <button type="submit" id="submitButton" disabled>読み込み中...</button>
    </form>

    <p id="message"></p>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        // ▼▼▼▼▼ 設定を書き換えてください ▼▼▼▼▼
        const liffId = "2008311248-3ggPBezx";
        const gasUrl = "https://script.google.com/macros/s/AKfycbwHnhOUi7qdbtpQ0IX0tzRCiwUu-PfwbbL5JxjxkJveOeKvFtZDqUhk7EqPlSLyy7n-VA/exec";
        // ▲▲▲▲▲ 設定を書き換えてください ▲▲▲▲▲

        let userId = '';
        // （中略）JavaScriptの部分は前回の完成版から変更の必要はありません
        // doPostに送るデータを少しだけ変更します
        document.getElementById('birthForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const relation = e.target.relation.value; // 追加
            const birthMonth = e.target.birthMonth.value;

            // （中略）
            try {
                const response = await fetch(gasUrl, {
                    method: 'POST',
                    mode: 'no-cors', 
                    // 送信するデータにrelationを追加
                    body: JSON.stringify({ userId: userId, relation: relation, birthMonth: birthMonth }), 
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' }
                });
                // （以下、変更なし）
            }
        });
    </script>
</body>
</html>